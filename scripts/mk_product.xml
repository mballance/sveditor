<project name="mk_product" default="mk_product">
	
	<property name="buildDirectory" value="${basedir}/../build"/>
	<property name="srcdir" value="${basedir}/../"/>
	<property environment="env"/>
	
	<!-- Import the version info -->
	<property file="${basedir}/../sveditor.info"/>
	<property environment="env"/>
	<property name="builder" location="${basedir}/../buildResult"/>
	<property name="base" location="${basedir}/../product_build"/>
	<property name="installFolder" location="${base}/installFolder"/>
	<property file="${basedir}/mk_product.properties"/>
	<property name="eclipse.home" location="${env.ECLIPSE_HOME}"/>


	<target name="mk_product">
		<property name="baseLocation" value="${eclipse.home}"/>
		<property name="buildDirectory" value="${basedir}/../buildDirectory"/>
		<property name="buildTempFolder" value="${buildDirectory}" />
<!--
		<property name="eclipseBaseURL" 
			value="file:///home/ballance/Downloads/eclipse-platform-3.7.1-linux-gtk-x86_64.zip"/>
  -->

		<!-- by default, check for deltapack co-located with eclipse -->
		<property name="deltapack" value="${eclipse.home}/deltapack/eclipse"/>

		<!-- Check that we have a deltapack -->
		<available property="haveDeltaPack" file="${deltapack}"/>
		<fail unless="haveDeltaPack" message="The deltapack is required to build this product.  Please edit buildProduct.xml or set the &quot;deltapack&quot; property." />
			
		<property name="builder" value="${basedir}" />
		<property name="buildDirectory" value="${basedir}/buildDirectory"/>
		<property name="pluginPath" value="${basedir}/..${path.separator}${deltapack}" />

<!--
		<mkdir dir="${base}"/>
		<mkdir dir="${installFolder}"/>
  -->
			
		<ant antfile="${eclipse.pdebuild.scripts}/productBuild/productBuild.xml" />

<!--
		<move todir="${basedir}">
			<fileset dir="${buildDirectory}/${buildLabel}" includes="*.zip"/>
		</move>
  -->

		<!-- refresh the workspace -->
<!--
		<eclipse.convertPath fileSystemPath="${basedir}" property="resourcePath"/>
		<eclipse.refreshLocal resource="${resourcePath}" depth="infinite"/>
		<ant antfile="${eclipse.pdebuild.scripts}/genericTargets.xml" 
			target="runDirector" inheritAll="true">
			<property name="p2.director.installPath" value="${installFolder}"/>
			<property name="p2.repo" value="${p2.build.repo}"/>
			<property name="p2.director.iu" value="my.rcp.product"/>
			<property name="p2.director.version" value="1.0.0"/>
		</ant>
  -->
<!--
        <delete dir="${buildDirectory}"/>
        <mkdir dir="${buildDirectory}"/>
        <copy todir="${buildDirectory}">
            <fileset dir="${srcdir}">
                <include name="plugins/**"/>
                <include name="features/**"/>
                <exclude name="**/*.svn/**"/>
                <exclude name="**/*.git/**"/>
            </fileset>
        </copy>
        <copy todir="${buildDirectory}" overwrite="true">
            <fileset dir="${srcdir}" 
                includes="features/**/*.xml, plugins/**/*.xml,
            		plugins/**/*.MF, plugins/**/*.properties,
            		plugins/**/*.product"/>
            <filterset begintoken="1" endtoken="3">
                <filter token=".2." value="${feature.version}"/>
            </filterset>
        </copy>
  -->

	</target>

</project>
